<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Probar cambio de contraseña</title>
</head>
<body>
  <h2>Cambiar contraseña de usuario</h2>

  <label>ID Usuario:
    <input type="number" id="user-id" value="2" />
  </label><br><br>

  <label>Nueva contraseña:
    <input type="text" id="new-password" />
  </label><br><br>

  <button onclick="cambiarPassword()">Cambiar</button>

  <p id="resultado" style="font-weight: bold;"></p>

  <script>
  async function cambiarPassword() {
    const id = document.getElementById('user-id').value;
    const password = document.getElementById('new-password').value;
    const resultado = document.getElementById('resultado');

    try {
      const res = await fetch(`http://localhost:3000/users/${id}/password`, {
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ password })
      });

      const data = await res.json();

      if (res.ok) {
        resultado.textContent = '✅ ' + (data.message || 'Contraseña actualizada');
        resultado.style.color = 'green';
      } else {
        resultado.textContent = '❌ ' + (data.error || 'Error inesperado');
        resultado.style.color = 'red';
      }
    } catch (err) {
      resultado.textContent = '❌ Error de conexión con el servidor';
      resultado.style.color = 'red';
      console.error(err);
    }
  }
</script>
</body>
</html>
